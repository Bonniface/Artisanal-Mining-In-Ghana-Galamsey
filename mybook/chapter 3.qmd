# CHAPTER THREE

## METHODOLOGY

Data from a time series is a set of observations made in a particular order over a period of time. There is a chance for correlation between observations because time series data points are gathered at close intervals. To help machine learning classifiers work with time series data, we provide several new tools. We first contend that local features or patterns in time series can be found and combined to address challenges involving time-series categorization. Then, a method to discover patterns that are helpful for classification is suggested. We combine these patterns to create computable categorization rules. In order to mask low-quality pixels, we will first collect Sentinel 2 data from Google Earth Engine in order to choose NDVI and EVI values.

Instead of analyzing the imagery directly, we will summarize the mean NDVI and EVI values. This will shorten the analysis time while still providing an attractive and useful map. We will apply a smoothing strategy using an ARIMA function to fix the situation where some cells may not have NDVI and EVI for a particular month. Once NA values have been eliminated, the time series will be divided to eliminate seasonality before the normalized data is fitted using a linear model. We will go to classify our data on the map and map it after we have extracted the linear trend.

## Research Design

In this study, the submission used a quantitative approach. Instead of using subjective judgment, findings and conclusions heavily rely on the use of statistical methods and reliable time series models.

### Data Representation

The Republic of Ghana, a nation in West Africa, will serve as the location for the experimental plots for this study. It shares borders with the Ivory Coast in the west, Burkina Faso in the north, and Togo in the east. It borders the Gulf of Guinea and the Atlantic Ocean to the south. Ghana's total size is 238,535 km2 (92,099 sq mi), and it is made up of a variety of biomes, from tropical rainforests to coastal savannas. Ghana, which has a population of over 31 million, is the second-most populous nation in West Africa, behind Nigeria.Accra, the nation's capital and largest city, as well as Kumasi, Tamale, and Sekondi-Takoradi, are other important cities.

### Assumptions

```{r,include=FALSE,warning=FALSE,message=FALSE}
td <- tsv %>%
  mutate(month = month(as.Date(rownames(tsv))), year = year(as.Date(rownames(tsv)))) %>%
  group_by(year, month) %>%
  summarise(mean_evi = mean(evi, na.rm = T), .groups = "keep") %>%
  as.data.frame()

td$date <- as.Date(paste0(td$year, "-", td$month, "-01"))
dx <- Dates[!(Dates$date %in% td$date),]


dx$mean_evi <- NA
Time_Series <- rbind(td, dx) %>%
  arrange(date)
write.csv(Time_Series,"Data/Time_Series.csv")


tdx <- read.csv("Data/tdx.csv")%>%rename(Date = date)
Rain <-read.csv("Data/Rainfall.csv")
Evap <- read.csv("Data/Evaporative Stress.csv")%>%rename(Evaporation = Evaporative)
Percip <- read.csv("Data/Percip.csv")%>%rename(Precipitation = Precip)


Rain_Evap <- Rain%>%full_join(Evap)
Rain_Evap_Percip <-Rain_Evap%>%full_join(Percip)

DataFrame <- Rain_Evap_Percip%>% full_join(tdx)


```

```{r,include=FALSE}
Description <-DataFrame%>%
      dplyr::select(Date,Rainfall,Evaporation,Precipitation,mean_evi)

Description <- if(length(Description[is.na(Description)]) > 0){imputeTS::na_kalman(Description, model = "auto.arima", smooth = T)} else {
    Description
 }
DF <-Description%>%
      dplyr::select(Rainfall,Evaporation,Precipitation,mean_evi)
```

### Explortory Data Analysis (Summary statistics)

```{r,warning=FALSE}
 Yearly <- Description%>%
          separate(Date,into = c("Year","Month","Day"),sep = "-")%>%
          group_by(Year)%>%
          summarise_each(funs(mean),Rainfall,Evaporation,Precipitation,mean_evi)

Monthly <- Description%>%
          separate(Date,into = c("Year","Month","Day"),sep = "-")%>%
           mutate(Month = month.abb[as.numeric(Month)])%>%
          group_by(Month)%>%
          summarise_each(funs(mean),Rainfall,Evaporation,Precipitation,mean_evi)

df <-head(Yearly)
df%>%
  kable(booktads = TRUE,align = "lccrr")
```

```{r,include=FALSE,message=FALSE,warning=FALSE}
#| label: tbl-stats
#| tbl-cap: "Summary statistics for Climate Date and Vegetation Loss In Ghana"

describe(Description) %>%
  kable(booktads = TRUE)%>%
  kable_styling(latex_options = "scale_down")
```

```{r,include=FALSE}
ggplot(lincoln_weather, aes(x = `Mean Temperature [F]`, y = `Month`, fill = ..x..)) +
  geom_density_ridges_gradient(scale = 3, rel_min_height = 0.01, gradient_lwd = 1.) +
  scale_x_continuous(expand = c(0.01, 0)) +
  scale_y_discrete(expand = c(0.01, 0)) +
  scale_fill_viridis(name = "Temp. [F]", option = "C") +
  labs(title = 'Temperatures in Lincoln NE',
       subtitle = 'Mean temperatures (Fahrenheit) by month for 2016\nData: Original CSV from the Weather Underground') +
  theme_ridges(font_size = 13, grid = TRUE) + theme(axis.title.y = element_blank())
```

```{r}
pairs.default(DF,main = "Corellation Between ",bg = c("red", "green", "blue"),pch = 21)
```

```{r, include=FALSE}
na.cnt <- length(Time_Series[is.na(Time_Series)])

```

### Non-Parametric Analysis

### **Time-series analysis**

#### [**Steps involved in Box-Jenkins approach**]{.underline}

![FlowChart](images/Steps.png "METHADOLOGY Steps involved in Box-Jenkins approach"){alt="FlowChart" fig-align="center"}
