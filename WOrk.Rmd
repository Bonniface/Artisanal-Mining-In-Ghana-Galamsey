---
title: "Untitled"
output: html_document
date: '2022-03-24'
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

`
```{r}
#' rgee: Image preprocessing SENTINEL2
#' @author Kalong Boniface
#' 
library(reticulate)
library(cptcity)
library(raster)
library(stars)
library(rgee)
library(sits)
library(reshape2)
library(ggplot2)
library(sf)
library(googleCloudStorageR)
ee_Initialize(drive = TRUE)
```


```{r}
ee_Initialize(drive = TRUE, gcs = TRUE)

project_id <- ee_get_earthengine_path() %>% 
  list.files(., "/home/boniface/Desktop/Git/Dashboard/Data/rgee-345404-0c9bbc4ed65b.json", full.names = TRUE) %>% 
  jsonlite::read_json() %>% 
  '$'(project_id) # Get the Project ID

googleCloudStorageR::gcs_create_bucket("Earth O", projectId = project_id)


```



# /Loading and Filtering SENTINEL 1 Collection



```{r}
Map$setCenter(-2.063,6.088,12)
geom <- ee$Geometry$Polygon(coords = list(
  c(8.1462, 1.1591),
  c(88.1462, -3.4497),
  c(4.1766, -3.4497),
  c(4.1766, 1.591)
  ),
   proj = "EPSG:4326",
  geodesic = TRUE
)
sentenil1 <- ee$ImageCollection('sentenl1')$
  filterBounds(geom)$
  filterDate('2010-01-01', '2022-01-01')$
  filter(ee$Filter$listContains('transmitterReceiverPolarisation', 'VV'))$
  filter(ee$Filter$listContains('transmitterReceiverPolarisation', 'VH'))$
  #Filter to get images collected in interferometric wide swath mode.
  filter(ee$Filter$eq('instrumentMode', 'IW'))$
  filter(ee$Filter$eq('orbitProperties_pass', 'ASCENDING'));
```


```{r}
print(sentenil1)
```
# Quaterlly 
```{r}
#Year 2010
# First Quarter 
s12010Q1 = sentenil1$filter(ee$Filter$calendarRange(2010,2010,'year'))$
                             filter(ee$Filter$calendarRange(1,3,'month'))$
                             mean()$
                             clip(geom)$
                             set('date', ee$Date$fromYMD(2010,1,1));
print(s12010Q1)

# Second Quarter 
s12010Q1 = sentenil1$filter(ee$Filter$calendarRange(2010,2010,'year'))$
                             filter(ee$Filter$calendarRange(4,6,'month'))$
                             mean()$
                             clip(geom)$
                             set('date', ee$Date$fromYMD(2010,4,1));
print(s12010Q1)

# Third Quarter 
s12010Q1 = sentenil1$filter(ee$Filter$calendarRange(2010,2010,'year'))$
                             filter(ee$Filter$calendarRange(7,9,'month'))$
                             mean()$
                             clip(geom)$
                             set('date', ee$Date$fromYMD(2010,7,1));
print(s12010Q1)

# Fouth Quarter 
s12010Q1 = sentenil1$filter(ee$Filter$calendarRange(2010,2010,'year'))$
                             filter(ee$Filter$calendarRange(10,12,'month'))$
                             mean()$
                             clip(geom)$
                             set('date', ee$Date$fromYMD(2010,10,1));
print(s12010Q1)
```



```{r}
s1QuarterlyCollection = ee$ImageCollection([
  
])
```


